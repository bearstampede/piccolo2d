#summary Rough Paper: History, Requirements, Concepts, Obstacles
#labels Phase-Requirements

This idea came up on the [http://groups.google.com/group/piccolo2d-dev/browse_thread/thread/df17f5cb0edfefe8 piccolo2d-dev maillist].

See also issue#61

= Motivation =
Piccolo2d is a scenegraph ZUI toolkit, [http://en.wikipedia.org/wiki/Scalable_Vector_Graphics svg] is a 2d vector graphics description language. Both share the idea of a scene graph and the grouping and transformation concepts also look similar at a first glance.

Is it possible to use svg documents e.g. generated by [http://www.inkscape.org/ inkscape] as input and convert them to piccolo2d scenegraphs?

= History =

There was some idea to build svg support into [http://www.cs.umd.edu/hcil/jazz/download/index.shtml jazz]. The [http://www.piccolo2d.org/doc/jazz/release-1.1/apidocs/index.html v1.1 API] has some svg classes.

= Requirements =

 * parse svg xml (e.g. using the super-lightweight [http://repo1.maven.org/maven2/xpp3/xpp3/1.1.3.3_min/ XPP3 min] xml pull parser.
 * parse css and build up a hierarchy.
 * parse svg paths and convert to generalpaths (shapes)
 * look up nodes in a piccolo2d scenegraph according to their ID (tree search)

= Concepts =

 * use a factory/strategy to parse the svg input
 * add a css manager class
 * create a scenegraph (PNode) using out-of-the-box PNode, PShape, PText, PImage classes
 * attach node id, css classes etc. as attributes.
 * nice to have: trigger node refreshs on css changes at runtime

= Obstacles =

 * css: cascading & node matching logic. http://www.w3.org/Style/CSS/SAC/ and http://today.java.net/pub/a/today/2003/10/14/swingcss.html 
 * svg path parsing is challenging - see the [http://www.w3.org/TR/SVG11/paths.html#PathDataBNF grammar] that has to be turned into a parser that ideally requires no additional runtime dependencies ([http://research.cs.queensu.ca/~thurston/ragel/ ragel], [http://groups.google.com/group/ragel-users ragel-users group]?). And it looks a bit fishy: http://lists.w3.org/Archives/Public/www-svg/2008Aug/0052.html
 * graceful failure for unexpected svg features?
 * fatal failure for invalid svg (validating parser? sax?)